{% load static %}
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>mainpage</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'db_app/fontawesome/css/all.css' %}">
    <link rel="stylesheet" href="{% static 'db_app/css/app.css' %}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <header id="header" class="col">
          <img id="logo" src="{% static 'db_app/img/logo.png' %}" alt="app logo">
          <h1>Dublin Bus</h1>
        </header>
      </div>
      <div id="main_section" class="row">
        <div id="route" class="d-none">
          <span>Route</span>
          <select id="route_options"></select>
        </div>
        <div id="map" class="col-md-9"></div>
        <div id="form" class="col-md-3 d-none d-md-block">
          <div class="row form_header">
            <h4>Travel Time Predictor</h4>
          </div>
          <div class="row input">
            <input id="originInput" class="form-control" type="text" placeholder="Enter Origin" autocomplete="on" runat="server" onclick="setOrigin()"/>
          </div>
          <div class="row input">
            <input id="destinationInput" class="form-control" type="text" placeholder="Enter Destination" autocomplete="on" runat="server" onclick="setDestination()"/>
          </div>
          <div class="row input">
            <select id="date">
              <option value="Null" selected>Enter Date (optional)</option>
            </select>
          </div>
          <div class="row input">
            <select id="time">
              <option value="Null" selected>Enter Time (optional)</option>
            </select>
          </div>
          <div class="row input">
            <input id="submit" type="submit" class="form-control font-weight-bold align-middle" value="Go!" onclick="searchRoute()">
          </div>
          <div class="row form_header">
            <h4>Search Bus Routes</h4>
          </div>
          <div class="row input">
            <select id="bus_line">
              <option value="Null" selected>Enter Bus Line</option>
            </select>
          </div>
          <div class="row input">
            <input id="submit2" type="submit" class="form-control font-weight-bold align-middle" value="Search" onclick="showRoute()">
          </div>
        </div>
      </div>
      <div class="row bottom_drop">
        <div class="col-4 d-sm-none">
          <div id="bottom_button">
            <p id="bottom_title">Events</p>
          </div>
        </div>
      </div>
      <div id="events" class="row">
        <!-- <div id="event1" class="col-md d-none d-md-block">
          <div class="event">
            <div class="event_date">
              <span class="grey_text">JUN</span>
              <span>12</span>
            </div>
            <div class="event_info">
              <span class="grey_text">Thu - 18:00</span>
              <span>Fleetwood Mac</span>
              <span class="grey_text">RDS Arena - Dublin</span>
            </div>
          </div>
        </div>
        <div id="event2" class="col-md d-none d-md-block">
          <div class="event">
            <div class="event_date">
              <span class="grey_text">JUN</span>
              <span>14</span>
            </div>
            <div class="event_info">
              <span class="grey_text">Fri - 17:00</span>
              <span>Mumford & Sons</span>
              <span class="grey_text">Malahide Castle - Co. Dublin</span>
            </div>
          </div>
        </div>
        <div id="event3" class="col-md d-none d-md-block">
          <div class="event">
            <div class="event_date">
              <span class="grey_text">JUN</span>
              <span>15</span>
            </div>
            <div class="event_info">
              <span class="grey_text">Sat - 18:00</span>
              <span>Bon Jovi: This House Is Not for Sale</span>
              <span class="grey_text">RDS Arena - Dublin</span>
            </div>
          </div>
        </div> -->
      </div>

    </div>

    <script type="text/javascript">

      // First map rendered when the page is loaded
      function myMap() {
        var myCenter = {lat: 53.349605, lng:-6.264175 };
        var mapCanvas = document.getElementById("map");
        var mapOptions = {center: myCenter, zoom: 11};
        var map = new google.maps.Map(mapCanvas, mapOptions);
        infowindow = new google.maps.InfoWindow({
          maxWidth: 355
        });
      }

      // Create the options for the Bus Lines select tag
      var bus_lines = JSON.parse("{{ bus_lines }}".replace(/&quot;/g,"\""));

      for (var i=0; i<bus_lines.length; i++) {
        document.getElementById('bus_line').innerHTML += '<option>' + bus_lines[i][0] + ' (' + bus_lines[i][1] + ')</option>';
      }

      // Change layout to mobile screen size
      function toMobile(media_query) {
        if (media_query.matches) {
          document.getElementById('header').innerHTML = '<img id="logo" src="{% static 'db_app/img/logo.png' %}" alt="app logo"><h1>Dublin Bus</h1><button id="burger_button" type="menu" name="button" onclick="toggle_menu()"><div class="burger"></div><div class="burger"></div><div class="burger"></div></button>';
          document.getElementById('submit').addEventListener("click", function() {
            $("#form").addClass("d-none");
            $("#form").addClass("d-md-block");
            $("#form").addClass("col-md-3");
            toggle_count = 0;
          });
        } else {
          document.getElementById('header').innerHTML = '<img id="logo" src="{% static 'db_app/img/logo.png' %}" alt="app logo"><h1>Dublin Bus</h1>';
        }
      }

      var media_query = window.matchMedia('(max-width: 767px)');
      toMobile(media_query);
      media_query.addListener(toMobile);

    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCM9nXFgqm8JbVlEYRAiPv6WTUFGSvyTBU&callback=myMap&libraries=places"></script>

    <script type="text/javascript" src="{% static 'db_app/js/app.js' %}"></script>

  </body>
</html>
